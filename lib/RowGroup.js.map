{"version":3,"file":"RowGroup.js","sourceRoot":"","sources":["../src/RowGroup.tsx"],"names":[],"mappings":";AAAA,uDAAuD;AACvD,OAAO,KAAK,EAAE,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AAC1C,OAAO,EAAE,UAAU,EAAE,MAAM,gBAAgB,CAAC;AA+B5C,IAAM,QAAQ,GAAG,UAAU,CAA6B,SAAS,QAAQ,CAAC,KAAK,EAAE,GAAG;IAClF,SAAS,iBAAiB,CAAC,MAAgB;QACjC,IAAA,wDAAiB,CAAwB;QACjD,IAAI,iBAAiB,EAAE;YACrB,IAAM,YAAY,GAAG,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC;YACjE,iBAAiB,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,GAAG,EAAE,YAAY,cAAA,EAAE,eAAe,EAAE,KAAK,CAAC,eAAe,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;SAClH;IACH,CAAC;IAED,SAAS,gBAAgB;QACvB,iBAAiB,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IACvC,CAAC;IAED,SAAS,OAAO;QACd,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,EAAE,EAAE,MAAM,EAAE,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;IACjF,CAAC;IAED,IAAM,UAAU,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAC3D,IAAM,KAAK,GAAG,EAAE,KAAK,EAAE,UAAW,CAAC,IAAI,GAAG,UAAW,CAAC,KAAK,EAAE,CAAC;IAC9D,IAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,IAAI,WAAW,CAAC;IAE/C,OAAO,CACL,6BAAK,SAAS,EAAC,sBAAsB,EAAC,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO;QAClE,oBAAC,QAAQ,eAAK,KAAK,IAAE,GAAG,EAAE,GAAG,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,iBAAiB,EAAE,iBAAiB,IAAI,CACvG,CACP,CAAC;AACJ,CAAC,CAAC,CAAC;AAEH,eAAe,QAAQ,CAAC;AAOxB,IAAM,WAAW,GAAG,UAAU,CAAmC,SAAS,WAAW,CAAC,KAAK,EAAE,GAAG;IAC9F,SAAS,SAAS,CAAC,EAA4B;YAA1B,YAAG;QACd,IAAA,2CAAiB,CAAW;QACpC,IAAI,GAAG,KAAK,WAAW,EAAE;YACvB,iBAAiB,CAAC,KAAK,CAAC,CAAC;SAC1B;QACD,IAAI,GAAG,KAAK,YAAY,EAAE;YACxB,iBAAiB,CAAC,IAAI,CAAC,CAAC;SACzB;QACD,IAAI,GAAG,KAAK,OAAO,EAAE;YACnB,iBAAiB,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;SACtC;IACH,CAAC;IAEO,IAAA,oBAAa,EAAb,kCAAa,EAAE,qBAAM,EAAE,yCAAgB,EAAE,6BAAU,EAAE,qDAAsB,EAAE,iBAAI,CAAW;IACpG,IAAM,UAAU,GAAG,SAAS,GAAG,EAAE,CAAC;IAElC,OAAO,CACL,6BACE,SAAS,EAAC,uBAAuB,EACjC,KAAK,EAAE,EAAE,MAAM,QAAA,EAAE,EACjB,SAAS,EAAE,SAAS,EACpB,QAAQ,EAAE,CAAC,EACX,GAAG,EAAE,GAAG;QAER,8BACE,SAAS,EAAC,iBAAiB,EAC3B,KAAK,EAAE,EAAE,UAAU,YAAA,EAAE,EACrB,OAAO,EAAE,gBAAgB,IAExB,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAC9D;QACP;YAAS,sBAAsB;;YAAI,IAAI,CAAU,CAC7C,CACP,CAAC;AACJ,CAAC,CAAC,CAAC","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { forwardRef } from 'react';\nimport { EventTypes } from './common/enums';\nimport { CellMetaData, RowRendererProps, CalculatedColumn } from './common/types';\nimport EventBus from './masks/EventBus';\n\ninterface Props<R> {\n  height: number;\n  columns: CalculatedColumn<R>[];\n  row: unknown;\n  cellRenderer?(): void;\n  cellMetaData: CellMetaData<R>;\n  isSelected?: boolean;\n  idx: number;\n  extraClasses?: string;\n  forceUpdate?: boolean;\n  subRowDetails?: unknown;\n  isRowHovered?: boolean;\n  colVisibleStartIdx: number;\n  colVisibleEndIdx: number;\n  colOverscanStartIdx: number;\n  colOverscanEndIdx: number;\n  isScrolling: boolean;\n  columnGroupDisplayName: string;\n  columnGroupName: string;\n  isExpanded: boolean;\n  treeDepth?: number;\n  name: string;\n  renderer?: React.ComponentType;\n  eventBus: EventBus;\n  renderBaseRow(p: RowRendererProps<R>): React.ReactElement;\n}\n\nconst RowGroup = forwardRef<HTMLDivElement, Props<any>>(function RowGroup(props, ref) {\n  function onRowExpandToggle(expand?: boolean) {\n    const { onRowExpandToggle } = props.cellMetaData;\n    if (onRowExpandToggle) {\n      const shouldExpand = expand == null ? !props.isExpanded : expand;\n      onRowExpandToggle({ rowIdx: props.idx, shouldExpand, columnGroupName: props.columnGroupName, name: props.name });\n    }\n  }\n\n  function onRowExpandClick() {\n    onRowExpandToggle(!props.isExpanded);\n  }\n\n  function onClick() {\n    props.eventBus.dispatch(EventTypes.SELECT_CELL, { rowIdx: props.idx, idx: 0 });\n  }\n\n  const lastColumn = props.columns[props.columns.length - 1];\n  const style = { width: lastColumn!.left + lastColumn!.width };\n  const Renderer = props.renderer || DefaultBase;\n\n  return (\n    <div className=\"react-grid-row-group\" style={style} onClick={onClick}>\n      <Renderer {...props} ref={ref} onRowExpandClick={onRowExpandClick} onRowExpandToggle={onRowExpandToggle} />\n    </div>\n  );\n});\n\nexport default RowGroup;\n\ninterface DefaultBaseProps extends Props<any> {\n  onRowExpandClick(): void;\n  onRowExpandToggle(expand?: boolean): void;\n}\n\nconst DefaultBase = forwardRef<HTMLDivElement, DefaultBaseProps>(function DefaultBase(props, ref) {\n  function onKeyDown({ key }: React.KeyboardEvent) {\n    const { onRowExpandToggle } = props;\n    if (key === 'ArrowLeft') {\n      onRowExpandToggle(false);\n    }\n    if (key === 'ArrowRight') {\n      onRowExpandToggle(true);\n    }\n    if (key === 'Enter') {\n      onRowExpandToggle(!props.isExpanded);\n    }\n  }\n\n  const { treeDepth = 0, height, onRowExpandClick, isExpanded, columnGroupDisplayName, name } = props;\n  const marginLeft = treeDepth * 20;\n\n  return (\n    <div\n      className=\"rdg-row-group-default\"\n      style={{ height }}\n      onKeyDown={onKeyDown}\n      tabIndex={0}\n      ref={ref}\n    >\n      <span\n        className=\"row-expand-icon\"\n        style={{ marginLeft }}\n        onClick={onRowExpandClick}\n      >\n        {isExpanded ? String.fromCharCode(9660) : String.fromCharCode(9658)}\n      </span>\n      <strong>{columnGroupDisplayName}: {name}</strong>\n    </div>\n  );\n});\n"]}